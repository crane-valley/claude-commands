---
description: Analyze repository and refactor if needed
---

Analyze the entire repository and refactor if needed:

1. **Analyze**: Scan the codebase for:
   - Code duplication
   - Long functions/methods that should be split
   - Poor naming conventions
   - Missing abstractions
   - Unused code
   - Inconsistent patterns
   - Complex conditionals
   - Tight coupling

2. **Evaluate**: Determine if refactoring is worthwhile:
   - Is the issue significant enough?
   - Will it improve maintainability?
   - Is the risk acceptable?

3. **Plan**: If refactoring is needed:
   - Enter plan mode
   - Document what to refactor and why
   - Outline the steps
   - Get approval before proceeding

4. **Execute**: After approval:
   - Refactor incrementally
   - Run tests after each change
   - Commit logical units separately
